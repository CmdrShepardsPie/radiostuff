"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const log_helpers_1 = require("@helpers/log-helpers");
const chalk_1 = __importDefault(require("chalk"));
const log = log_helpers_1.createLog("Helpers");
function wait(ms, fn) {
    log(chalk_1.default.green("Wait"), ms);
    return new Promise((resolve, reject) => {
        setTimeout(async () => {
            try {
                resolve(fn && (await fn()));
            }
            catch (e) {
                reject(e);
            }
        }, ms);
    });
}
exports.wait = wait;
function numberToString(num, major, minor) {
    let str = num.toString();
    const split = str.split(".");
    if (major !== undefined) {
        if (split[0] === undefined) {
            split[0] = "0";
        }
        while (split[0].length < major) {
            split[0] = "0" + split[0];
        }
        if (split[0].length > major) {
            log(chalk_1.default.red("Major length exceeded"), "Number:", num, "Section:", split[0], "Length:", split[0].length, "Target:", major);
        }
        str = split.join(".");
    }
    if (minor !== undefined) {
        if (split[1] === undefined) {
            split[1] = "0";
        }
        while (split[1].length < minor) {
            split[1] = split[1] + "0";
        }
        if (split[1].length > minor) {
            log(chalk_1.default.red("Minor length exceeded"), "Number:", num, "Section:", split[1], "Length:", split[1].length, "Target:", minor);
        }
        str = split.join(".");
    }
    return str;
}
exports.numberToString = numberToString;
function flattenObject(data) {
    if (!data || typeof data !== "object" || Array.isArray(data)) {
        return data;
    }
    let subData = { ...data };
    let loop = true;
    while (loop) {
        loop = false;
        const entries = Object.entries(subData);
        for (const entry of entries) {
            const key = entry[0];
            const value = entry[1];
            if (typeof value === "object" && !Array.isArray(value)) {
                delete subData[key];
                const valueWithKeynames = {};
                Object.entries(value).forEach((subEntry) => {
                    valueWithKeynames[`${key}.${subEntry[0]}`] = subEntry[1];
                });
                subData = { ...subData, ...valueWithKeynames };
                loop = true;
            }
        }
    }
    return subData;
}
exports.flattenObject = flattenObject;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVscGVycy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9oZWxwZXJzL2hlbHBlcnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxzREFBaUQ7QUFDakQsa0RBQTBCO0FBRTFCLE1BQU0sR0FBRyxHQUE0Qix1QkFBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBRTFELFNBQWdCLElBQUksQ0FBVyxFQUFVLEVBQUUsRUFBMkI7SUFDcEUsR0FBRyxDQUFDLGVBQUssQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDN0IsT0FBTyxJQUFJLE9BQU8sQ0FBQyxDQUFDLE9BQTJDLEVBQUUsTUFBOEIsRUFBUSxFQUFFO1FBQ3ZHLFVBQVUsQ0FBQyxLQUFLLElBQUksRUFBRTtZQUNwQixJQUFJO2dCQUNGLE9BQU8sQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQzthQUM3QjtZQUFDLE9BQU8sQ0FBQyxFQUFFO2dCQUNWLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUNYO1FBQ0gsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQ1QsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDO0FBWEQsb0JBV0M7QUFFRCxTQUFnQixjQUFjLENBQUMsR0FBVyxFQUFFLEtBQWMsRUFBRSxLQUFjO0lBQ3hFLElBQUksR0FBRyxHQUFXLEdBQUcsQ0FBQyxRQUFRLEVBQUUsQ0FBQztJQUNqQyxNQUFNLEtBQUssR0FBYSxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3ZDLElBQUksS0FBSyxLQUFLLFNBQVMsRUFBRTtRQUN2QixJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxTQUFTLEVBQUU7WUFDMUIsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztTQUNoQjtRQUNELE9BQU8sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1B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QixFQUFFLENBQUM7Z0JBQy9DLElBQUksR0FBRyxJQUFJLENBQUM7YUFDYjtTQUNGO0tBQ0Y7SUFDRCxPQUFPLE9BQU8sQ0FBQztBQUNqQixDQUFDO0FBeEJELHNDQXdCQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUxvZyB9IGZyb20gXCJAaGVscGVycy9sb2ctaGVscGVyc1wiO1xyXG5pbXBvcnQgY2hhbGsgZnJvbSBcImNoYWxrXCI7XHJcblxyXG5jb25zdCBsb2c6ICguLi5tc2c6IGFueVtdKSA9PiB2b2lkID0gY3JlYXRlTG9nKFwiSGVscGVyc1wiKTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB3YWl0PFQgPSB2b2lkPihtczogbnVtYmVyLCBmbj86ICgpID0+IChUIHwgUHJvbWlzZTxUPikpOiBQcm9taXNlPFQ+IHtcclxuICBsb2coY2hhbGsuZ3JlZW4oXCJXYWl0XCIpLCBtcyk7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlOiAodmFsdWU/OiAoUHJvbWlzZTxUPiB8IFQpKSA9PiB2b2lkLCByZWplY3Q6IChyZWFzb24/OiBhbnkpID0+IHZvaWQpOiB2b2lkID0+IHtcclxuICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHJlc29sdmUoZm4gJiYgKGF3YWl0IGZuKCkpKTtcclxuICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJlamVjdChlKTtcclxuICAgICAgfVxyXG4gICAgfSwgbXMpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbnVtYmVyVG9TdHJpbmcobnVtOiBudW1iZXIsIG1ham9yPzogbnVtYmVyLCBtaW5vcj86IG51bWJlcik6IHN0cmluZyB7XHJcbiAgbGV0IHN0cjogc3RyaW5nID0gbnVtLnRvU3RyaW5nKCk7XHJcbiAgY29uc3Qgc3BsaXQ6IHN0cmluZ1tdID0gc3RyLnNwbGl0KFwiLlwiKTtcclxuICBpZiAobWFqb3IgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgaWYgKHNwbGl0WzBdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgc3BsaXRbMF0gPSBcIjBcIjtcclxuICAgIH1cclxuICAgIHdoaWxlIChzcGxpdFswXS5sZW5ndGggPCBtYWpvcikge1xyXG4gICAgICBzcGxpdFswXSA9IFwiMFwiICsgc3BsaXRbMF07XHJcbiAgICB9XHJcbiAgICBpZiAoc3BsaXRbMF0ubGVuZ3RoID4gbWFqb3IpIHtcclxuICAgICAgbG9nKGNoYWxrLnJlZChcIk1ham9yIGxlbmd0aCBleGNlZWRlZFwiKSwgXCJOdW1iZXI6XCIsIG51bSwgXCJTZWN0aW9uOlwiLCBzcGxpdFswXSwgXCJMZW5ndGg6XCIsIHNwbGl0WzBdLmxlbmd0aCwgXCJUYXJnZXQ6XCIsIG1ham9yKTtcclxuICAgIH1cclxuICAgIHN0ciA9IHNwbGl0LmpvaW4oXCIuXCIpO1xyXG4gIH1cclxuICBpZiAobWlub3IgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgaWYgKHNwbGl0WzFdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgc3BsaXRbMV0gPSBcIjBcIjtcclxuICAgIH1cclxuICAgIHdoaWxlIChzcGxpdFsxXS5sZW5ndGggPCBtaW5vcikge1xyXG4gICAgICBzcGxpdFsxXSA9IHNwbGl0WzFdICsgXCIwXCI7XHJcbiAgICB9XHJcbiAgICBpZiAoc3BsaXRbMV0ubGVuZ3RoID4gbWlub3IpIHtcclxuICAgICAgbG9nKGNoYWxrLnJlZChcIk1pbm9yIGxlbmd0aCBleGNlZWRlZFwiKSwgXCJOdW1iZXI6XCIsIG51bSwgXCJTZWN0aW9uOlwiLCBzcGxpdFsxXSwgXCJMZW5ndGg6XCIsIHNwbGl0WzFdLmxlbmd0aCwgXCJUYXJnZXQ6XCIsIG1pbm9yKTtcclxuICAgIH1cclxuICAgIHN0ciA9IHNwbGl0LmpvaW4oXCIuXCIpO1xyXG4gIH1cclxuICByZXR1cm4gc3RyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZmxhdHRlbk9iamVjdChkYXRhOiBhbnkpOiBhbnkge1xyXG4gIGlmICghZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gXCJvYmplY3RcIiB8fCBBcnJheS5pc0FycmF5KGRhdGEpKSB7XHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9XHJcbiAgbGV0IHN1YkRhdGE6IGFueSA9IHsgLi4uZGF0YSB9O1xyXG4gIGxldCBsb29wOiBib29sZWFuID0gdHJ1ZTtcclxuICB3aGlsZSAobG9vcCkge1xyXG4gICAgbG9vcCA9IGZhbHNlO1xyXG4gICAgY29uc3QgZW50cmllczogW3N0cmluZywgYW55XVtdID0gT2JqZWN0LmVudHJpZXMoc3ViRGF0YSk7XHJcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcclxuICAgICAgY29uc3Qga2V5OiBzdHJpbmcgPSBlbnRyeVswXTtcclxuICAgICAgY29uc3QgdmFsdWU6IGFueSA9IGVudHJ5WzFdO1xyXG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmICFBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgIGRlbGV0ZSBzdWJEYXRhW2tleV07XHJcbiAgICAgICAgY29uc3QgdmFsdWVXaXRoS2V5bmFtZXM6IHsgW2tleTogc3RyaW5nXTogYW55IH0gPSB7fTtcclxuICAgICAgICBPYmplY3QuZW50cmllcyh2YWx1ZSkuZm9yRWFjaCgoc3ViRW50cnk6IFtzdHJpbmcsIGFueV0pID0+IHtcclxuICAgICAgICAgIHZhbHVlV2l0aEtleW5hbWVzW2Ake2tleX0uJHtzdWJFbnRyeVswXX1gXSA9IHN1YkVudHJ5WzFdO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHN1YkRhdGEgPSB7IC4uLnN1YkRhdGEsIC4uLnZhbHVlV2l0aEtleW5hbWVzIH07XHJcbiAgICAgICAgbG9vcCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIHN1YkRhdGE7XHJcbn1cclxuIl19